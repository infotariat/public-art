getwd()
setwd("~/projects/public-art")
getwd()
con <- file("public_art.csv", "rt")
readLines(con, 2)
close(con)
con <- file("public_art.csv", "rt")
first2 <- readLines(con, 2)
str(first2)
first2[1]
install.packages("tidyverse")
library(tidyverse)
artcols <- str_split(first2[1], ",")
library(stringr)
artcols <- str_split(first2[1], ",")
artcols
artcells <- str_split(first2[2], ",")
artcells
attempt2 <- str_split(first2[1], "\"")
attempt2
attempt2 <- str_split(first2[1], "\",")
attempt2
attempt2 <- str_split(first2[1], "\",\"")
attempt2
attempt2 <- str_split(first2[2], "\",\"")
attempt2
attempt2 <- str_split(first2[2], '\",\"')
attempt2
attempt3 <- str_split(first2[2], '\",\"')
attempt2 <- str_split(first2[2], "\",\"")
attempt2 == attempt3
df <- data.frame(attempt2, attempt3)
df
df <- data.frame()
df <- rbind(df, attempt2)
df <- rbind(df, attempt3)
df
artcols <- str_split(first2[1], '\",\"') # almost there
artrow1 <- str_split(first2[2], '\",\"') # still messy but gets most of it
df <- data.frame()
colnames(df) <- artcols
df[1, ] <- artrow1
df
df[1]
rm(df)
length(artcols)
source('~/projects/public-art/public_art.r')
df <- data.frame()
df[1, ] <- artrow1
ddf
df
df[1]
df <- data.frame()
df <- rbind(df, artrow1)
df
str(df)
rm(df)
rm(list=ls(pattern="df"))
artcols
str(artcols)
artcols <- unlist(str_split(first2[1], '\",\"')) # almost there
artcols
artrow1 <- unlist(str_split(first2[2], '\",\"')) # still messy but gets most of it
artrow1
front <- artcols[1]
front
str_extract(front, "\"")
front
str_replace(front, "\"", "")
front
x <- "\"bob\""
x
str_replace(bob, "\"", "")
str_replace(x, "\"", "")
x
str_replace_all(x, "\"", "")
first2[1]
str_replace_all(first2[1], "\"", "")
row1 <- str_replace_all(first2[2], "\"", "")
row1
row1 <- unlist(str_split(row1, ','))
row1
readLine(con)
readLines(con, 1)
readLines(con, 1)
readLines(con, 1)
myline <- read.csv("public_art.csv", nrows=3, skip=1)
close(con)
myline <- read.csv("public_art.csv", nrows=3, skip=1)
myline
myline <- read.csv("public_art.csv", nrows=3)
myline
colnames(myline)
myline <- read.csv("public_art.csv")
myline
head(myline)
nrow(myline)
df <- data.frame()
help("data.frame")
help("colnames")
source('~/projects/public-art/public_art.r')
source('~/projects/public-art/public_art.r')
muColumns
myColumns
str(myColumns)
df <- data.frame(matrix("", ncol=19))
colnames(df) <- myColumns
df()
df
source('~/projects/public-art/public_art.r')
warnings()
df
help("rbind")
source('~/projects/public-art/public_art.r')
df
rm(df)
rm(afg)
rm(m)
rm(metro)
rm(thads)
rm(national)
rm(thads_met)
source('~/projects/public-art/public_art.r')
warnings
warnings()
rm(df)
source('~/projects/public-art/public_art.r')
rm(df)
source('~/projects/public-art/public_art.r')
df
df
rm(df)
source('~/projects/public-art/public_art.r')
help(isEmpty)
next_line
df
close(con)
str(df)
rm(df)
rm(next_line)
con <- file("public_art.csv", "rt")
process_line <- function(data_line) {
clean_line <- str_replace_all(data_line, "\"", "")
clean_line <- unlist(str_split(clean_line, ","))
return (clean_line)
}
df <- data.frame(matrix("", ncol=19), stringsAsFactors=FALSE)
myColumns <- process_line(readLines(con, 1))
colnames(df) <- myColumns
next_line <- process_line(readLines(con, 1))
str(next_line)
while (length(next_line) == 19) {
df <- rbind(df, next_line)
next_line <- process_line(readLines(con, 1))
}
# ALWAYS REMEMBER TO CLOSE CONNECTIONS
close(con)
df
source('~/projects/public-art/public_art.r')
df
head(df)
df(20:30, )
df[20:30, ]
df[20:30, 1:5]
colnames(df)
df$state
nrow(df)
df[df$state != 'OR', ]
df[df$state != 'Oregon', ]
df[df$state != 'Oregon' & df$state != 'OR', ]
df[df$state != 'Oregon' & df$state != 'OR', ]$state
df$state[1:20]
df[6:9, ]
df[8, ]
df[9,]
colnames(df)
rm(df)
con <- file("public_art.csv", "rt")
process_line <- function(data_line) {
clean_line <- str_replace_all(data_line, "\"", "")
clean_line <- unlist(str_split(clean_line, ","))
return (clean_line)
}
L <- readLines(con, 1)
L
L
L <- readLines(con, 1)
L
L <- readLines(con, 1)
L
length(L)
str(L)
L <- readLines(con, 1)
L
readLines(con, 1)
readLines(con, 1)
readLines(con, 1)
readLines(con, 1)
readLines(con, 1)
close(con)
con <- file("public_art.csv", "rt")
next_line <- process_line(readLines(con, 1))
next_line
next_line
next_line <- process_line(readLines(con, 1))
next_line
help(colclasses)
??colclasses
help(colClasses)
??colClasses
rm(df)
con <- file("public_art.csv", "rt")
process_line <- function(data_line) {
clean_line <- str_replace_all(data_line, "\"", "")
clean_line <- unlist(str_split(clean_line, ","))
return (clean_line)
}
record_id <- integer()
artist <- character()
title <- character()
date <- as.Date(character())
medium <- character()
discipline <- character()
dimensions <- character()
funding_source <- character()
location <- character()
street <- character()
city <- character()
state <- character()
zipcode <- character()
lat <- numeric()
lng <- numeric()
description <- character()
image_url <- character()
detail_url <- character()
date_modified <- as.Date(character())
df <- data.frame(c(
record_id,
artist,
title,
date,
medium,
discipline,
dimensions,
funding_source,
location,
street,
city,
state,
zipcode,
lat,
lng,
description,
image_url,
detail_url,
date_modified
))
next_line <- process_line(readLines(con, 1))
next_line
length(next_line)
next_line <- process_line(readLines(con, 1))
while (length(next_line) != 0) {
df <- rbind(df, next_line)
next_line <- process_line(readLines(con, 1))
}
warnings()
rm(df)
close(con)
source('~/projects/public-art/public_art.r')
warnings()
next_line
help("is.numeric")
is.numeric("dfiousdiufsd")
close(con)
rm(df, next_line)
source('~/projects/public-art/public_art.r')
df
str(df)
con <- file("public_art.csv", "rt")
next_line <- process_line(readLines(con, 1))
str(next_line)
next_line <- process_line(readLines(con, 1))
str(next_line)
is.na(as.numeric(next_line))
close(con
)
source('~/projects/public-art/public_art.r')
df
nrow(df)
joeblow <- numeric()
df <- data.frame(joeblow, c(2:15))
df <- data.frame(c(joeblow, 2:15))
df
rm(df)
rm(joeblow)
x <- read_csv("public_art.csv")
head(x)
problems(x)
nrow(x)
x[548,]
x[548,][19]
df[2, ]
x[2, ]
# different way of doing it
require(tidyverse)
df <- read_csv("public_art.csv")
# still has problems
df
df[1,]
df[, 1]
str(df[,1])
df[45:47,]
nrow(df)
str(df)
ggplot(df, aes(zipcode)) + geom_bar(stat="count")
ggplot(df, aes(date)) + geom_bar(stat="count")
max(df$date)
min(df$date)
is.na(as.numeric(df$date))
source('~/projects/public-art/public_art.r')
df$date
ggplot(df, aes(date)) + geom_bar(stat="count")
newart <- df[df$date > 1999, ]
ggplot(newart, aes(date)) + geom_bar(stat="count")
newart[newart$date==2004]
newart[newart$date==2004, ]
art2004 <- newart[newart$date==2004, ]
art2004
nrow(art2004)
head(art2004, 50)
art2004[1:50, ]
art2004[11:20, ]
after_tax <- df[df$date > 2012, ]
after_tax
after_tax
after_tax$artist
